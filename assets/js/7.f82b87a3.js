(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{587:function(t,s,a){t.exports=a.p+"assets/img/image-20200706154003422.fff4cda3.png"},588:function(t,s,a){t.exports=a.p+"assets/img/image-20200706154723788.ac0efb34.png"},589:function(t,s,a){t.exports=a.p+"assets/img/image-20200706155236983.7368e564.png"},590:function(t,s,a){t.exports=a.p+"assets/img/image-20200706155702348.e1816660.png"},591:function(t,s,a){t.exports=a.p+"assets/img/image-20200706160736815.e6fea764.png"},592:function(t,s,a){t.exports=a.p+"assets/img/image-20200706160823107.325ca869.png"},593:function(t,s,a){t.exports=a.p+"assets/img/image-20200706161246964.773c3985.png"},620:function(t,s,a){"use strict";a.r(s);var e=a(69),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_01-默认-mocker-对象"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_01-默认-mocker-对象"}},[t._v("#")]),t._v(" 01. 默认 Mocker 对象")]),t._v(" "),e("p",[t._v("本节我们将实现：测试默认的 Mocker 对象，并添加一组 mock_module。")]),t._v(" "),e("h2",{attrs:{id:"_1-启动项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-启动项目"}},[t._v("#")]),t._v(" 1. 启动项目")]),t._v(" "),e("p",[t._v("执行如下命令即完成项目的启动了：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" start\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 前提为全局安装了 mockstar-cli")]),t._v("\n$ mockstar start --watch\n")])])]),e("h2",{attrs:{id:"_2-打开管理端"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-打开管理端"}},[t._v("#")]),t._v(" 2. 打开管理端")]),t._v(" "),e("blockquote",[e("ul",[e("li",[t._v("当使用了 "),e("code",[t._v("--watch")]),t._v(" 之后，我们会监听 "),e("code",[t._v("mockServerPath")]),t._v(" 值对应的目录文件变化，自动重启服务。")]),t._v(" "),e("li",[t._v("需要注意的是目前我们并不会刷新页面，还是需要大家手动刷新")])])]),t._v(" "),e("p",[t._v("默认情况下，mock server 会使用 "),e("code",[t._v("9527")]),t._v(" 端口，因此打开浏览器，访问 "),e("code",[t._v("127.0.0.1:9527")]),t._v("。你可以激活不同的桩数据，体验自由切换桩数据的功能。")]),t._v(" "),e("p",[t._v("脚手架中提供了几个 mocker 样例，你可以进入到 "),e("code",[t._v("mock_modules")]),t._v(' 目录下，找到其中一个桩数据，适当修改返回值，然后再在管理端"预览结果"。管理端启动效果如下：')]),t._v(" "),e("img",{staticStyle:{zoom:"15%"},attrs:{src:a(587),alt:"image-20200706154003422"}}),t._v(" "),e("p",[t._v("在这个界面我们可以看到展示了一个较为精简的 Mock 面板，同时提供快捷的接口数据切换。")]),t._v(" "),e("p",[t._v("点击 "),e("code",[t._v("更多")]),t._v(" 后，显示一个更加详细的管理面板")]),t._v(" "),e("ul",[e("li",[t._v("渲染 Mocker 根目录下的 "),e("code",[t._v("README.md")]),t._v("，展示必要的信息")]),t._v(" "),e("li",[t._v("提供 "),e("code",[t._v("whistle")]),t._v(" 配置，复制即可使用")]),t._v(" "),e("li",[t._v("提供结果预览功能，快捷的查看接口结果")])]),t._v(" "),e("img",{staticStyle:{zoom:"15%"},attrs:{src:a(588),alt:"image-20200706154723788"}}),t._v(" "),e("h2",{attrs:{id:"_3-查看接口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-查看接口"}},[t._v("#")]),t._v(" 3. 查看接口")]),t._v(" "),e("h3",{attrs:{id:"_3-1-在后台中查看"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-在后台中查看"}},[t._v("#")]),t._v(" 3.1 在后台中查看")]),t._v(" "),e("img",{staticStyle:{zoom:"30%"},attrs:{src:a(589),alt:"image-20200706155236983"}}),t._v(" "),e("p",[t._v("我们直接在后台中预览结果如上。")]),t._v(" "),e("h3",{attrs:{id:"_3-2-通过-whistle-代理后访问"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-通过-whistle-代理后访问"}},[t._v("#")]),t._v(" 3.2 通过 whistle 代理后访问")]),t._v(" "),e("blockquote",[e("p",[t._v("具体的配置可以参考 "),e("RouterLink",{attrs:{to:"/tool/"}},[t._v("工具部分")])],1)]),t._v(" "),e("img",{staticStyle:{zoom:"25%"},attrs:{src:a(590),alt:"image-20200706155702348"}}),t._v(" "),e("p",[t._v("通过代理，我们可以更加方便的实现本地的调试功能。")]),t._v(" "),e("h2",{attrs:{id:"_4-添加一组数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-添加一组数据"}},[t._v("#")]),t._v(" 4. 添加一组数据")]),t._v(" "),e("p",[t._v("现在我们将要在这一 Mocker 下，添加两个 mock_module 即不同的接口返回数据。")]),t._v(" "),e("h3",{attrs:{id:"_4-1-json-方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-json-方式"}},[t._v("#")]),t._v(" 4.1 JSON 方式")]),t._v(" "),e("p",[t._v("我们在 "),e("code",[t._v("src/mockers/demo_cgi/mock_modules")]),t._v("，下面新建 "),e("code",[t._v("error_100001.json")]),t._v("，并添加如下内容：")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"retcode"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100001")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"err_msg"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error 100001"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("完成之后刷新管理后台，可以看到对应的 mock 数据已经被添加：")]),t._v(" "),e("img",{staticStyle:{zoom:"40%"},attrs:{src:a(591),alt:"image-20200706160736815"}}),t._v(" "),e("p",[t._v("我们同样可以预览其结果：")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:a(592),alt:"image-20200706160823107"}}),t._v(" "),e("h3",{attrs:{id:"_4-2-js-方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-js-方式"}},[t._v("#")]),t._v(" 4.2 JS 方式")]),t._v(" "),e("p",[t._v("通过 JS 方式的，新增数据类型时只需要默认暴露数据即可，我们在"),e("code",[t._v("src/mockers/demo_cgi/mock_modules")]),t._v("，下面新建 "),e("code",[t._v("error_100002.js")]),t._v("，并添加如下内容：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("module"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  retcode"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100002")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  err_msg"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error 100002"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("同样可以预览结果：")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:a(593),alt:"image-20200706161246964"}}),t._v(" "),e("h3",{attrs:{id:"_4-3-添加配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-添加配置"}},[t._v("#")]),t._v(" 4.3 添加配置")]),t._v(" "),e("p",[t._v("这一部分可以参考"),e("code",[t._v("src/mockers/demo_cgi/mock_modules/(success_type_1|error_100000)")]),t._v(" 文件夹下面的内容，通过 "),e("code",[t._v("index.js")]),t._v(" 默认暴露需要测试的数据，并且通过 "),e("code",[t._v("config.json")]),t._v(" 进行不同类型数据的配置。")]),t._v(" "),e("p",[t._v("具体的配置详情可以 "),e("a",{attrs:{href:"/api"}},[t._v("参考")]),t._v("。")])])}),[],!1,null,null,null);s.default=r.exports}}]);