(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{598:function(t,s,a){t.exports=a.p+"assets/img/init.017eb220.gif"},599:function(t,s,a){t.exports=a.p+"assets/img/started-log.104aafb2.png"},600:function(t,s,a){t.exports=a.p+"assets/img/admin-ui.1ad83ef2.png"},601:function(t,s,a){t.exports=a.p+"assets/img/admin-ui2.997119bc.png"},602:function(t,s,a){t.exports=a.p+"assets/img/preview-data.5a3145c5.png"},603:function(t,s,a){t.exports=a.p+"assets/img/demo-result1.693f6265.png"},604:function(t,s,a){t.exports=a.p+"assets/img/demo-result2.c970c3f7.png"},605:function(t,s,a){t.exports=a.p+"assets/img/hello-world-preview-data.b0ed49c1.png"},606:function(t,s,a){t.exports=a.p+"assets/img/hello-world-result.8331a839.png"},644:function(t,s,a){"use strict";a.r(s);var e=a(69),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"快速入门"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速入门"}},[t._v("#")]),t._v(" 快速入门")]),t._v(" "),e("p",[t._v("使用 "),e("a",{attrs:{href:"https://www.npmjs.com/package/create-mockstar-app",target:"_blank",rel:"noopener noreferrer"}},[t._v("create-mockstar-app"),e("OutboundLink")],1),t._v(" 可以快速生成项目。")]),t._v(" "),e("h2",{attrs:{id:"_1-创建项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建项目"}},[t._v("#")]),t._v(" 1. 创建项目")]),t._v(" "),e("p",[t._v("使用下面的一个命令，即可以创建一个名字为 "),e("code",[t._v("my-app")]),t._v(" 的 MockStar 项目：")]),t._v(" "),e("blockquote",[e("p",[t._v("注意，如果遇到无法安装或执行的情况，可能是因为 npm 未正确配置，可以参考 "),e("RouterLink",{attrs:{to:"/docs/install.html"}},[t._v("安装和升级")]),t._v(" 一文配置 npm 。")],1)]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ npx create-mockstar-app my-app\n")])])]),e("div",{staticStyle:{"text-align":"center"}},[e("img",{attrs:{src:a(598)}})]),t._v(" "),e("h2",{attrs:{id:"_2-启动项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动项目"}},[t._v("#")]),t._v(" 2. 启动项目")]),t._v(" "),e("p",[t._v("命令执行完成之后，直接运行启动即可：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" my-app\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" start\n")])])]),e("p",[e("img",{attrs:{src:a(599),alt:""}})]),t._v(" "),e("p",[t._v("默认情况下会启动 "),e("code",[t._v("9527")]),t._v(" 端口，因此直接打开 "),e("a",{attrs:{href:"http://127.0.0.1:9527",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1:9527"),e("OutboundLink")],1),t._v(" 进入到管理端页面，并进入到 Mocker 快速操作面板。我们可以看到面板上有一个 "),e("code",[t._v("demo_cgi")]),t._v(" ，是默认生成的例子。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(600),alt:""}})]),t._v(" "),e("p",[t._v("点击面板右上角的 "),e("code",[t._v("更多...")]),t._v(" 链接，可以进入详细操作页。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(601),alt:""}})]),t._v(" "),e("p",[t._v("可以点击 "),e("code",[t._v("激活")]),t._v(" 按钮选择某一个 Mock 数据作为该 Mocker 的返回值，也可以点击 "),e("code",[t._v("预览结果")]),t._v(" 按钮来预览 Mock 数据的值。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(602),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"_3-使用-mock-数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用-mock-数据"}},[t._v("#")]),t._v(" 3. 使用 Mock 数据")]),t._v(" "),e("p",[t._v("在本例中，我们虚构了一个路由 "),e("code",[t._v("/cgi-bin/a/b/demo_cgi")]),t._v(" ，你可以通过 whistle 设置如下代理：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("/(.*)/cgi-bin/a/b/demo_cgi(.*)/ 127.0.0.1:9527\n")])])]),e("p",[t._v("然后再通过 "),e("RouterLink",{attrs:{to:"/tool/proxy-switchyomega.html"}},[t._v("Proxy SwitchyOmega")]),t._v(" 等配置请求走 whistle 端口即可。例如访问 "),e("code",[t._v("https://now.qq.com/cgi-bin/a/b/demo_cgi")]),t._v(" :")],1),t._v(" "),e("p",[e("img",{attrs:{src:a(603),alt:""}})]),t._v(" "),e("p",[t._v("切换到管理端，点击 "),e("code",[t._v("success_js_module")]),t._v(" 对应的 "),e("code",[t._v("激活")]),t._v(" 按钮户，再重新请求一次，可以看到结果接切换到 "),e("code",[t._v("success_js_module")]),t._v(" 对应的值了。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(604),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"_4-新增一个桩数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-新增一个桩数据"}},[t._v("#")]),t._v(" 4. 新增一个桩数据")]),t._v(" "),e("p",[t._v("每一种 Mock 数据结果，我们称之为一个 "),e("code",[t._v("桩数据")]),t._v("，新增一个也非常简单，支持符合 "),e("code",[t._v("CommonJS")]),t._v(" 规范的 Node 模块，也支持 "),e("code",[t._v("json")]),t._v(" 格式的文件。")]),t._v(" "),e("blockquote",[e("p",[t._v("不推荐大家用 "),e("code",[t._v("json")]),t._v(" 格式的文件。Node 模块的话会更加容易维护和管理。")])]),t._v(" "),e("p",[t._v("例如在 "),e("code",[t._v("mock_server/demo_cgi/mock_modules")]),t._v(" 下新建一个 "),e("code",[t._v("hello_world")]),t._v(" 的文件夹，创建 "),e("code",[t._v("index.js")]),t._v(" 和 "),e("code",[t._v("config.json")]),t._v(" 两个文件，内容如下。")]),t._v(" "),e("p",[e("code",[t._v("index.js")]),t._v(" 文件内容：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" getSuccessData "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../base'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 学生类型\n *\n * @param {Object} params 请求参数的对象，例如 ?a=1&b=2 ，则 params={a:1,b:2}\n * @param {Object} req 详见 http://expressjs.com/en/4x/api.html#req\n * @return {Promise|*}\n */")]),t._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSuccessData")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    uid"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uid "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10086")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    description"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    other_msg"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'我是来自 hello_world 模块的桩数据！'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[e("code",[t._v("config.json")]),t._v(" 文件内容：")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"我来描述下 hello_world 大概是什么"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("刷新管理页面之后看到已经多了一个桩数据了。")]),t._v(" "),e("blockquote",[e("p",[t._v("我们在启动 MockStar 项目时追加了 "),e("code",[t._v("--watch")]),t._v(" ，这样追加完桩主句之后，就能自动重启并将其识别出来。如果失效，可以先运行 "),e("code",[t._v("npm run stop")]),t._v("，然后再重新运行 "),e("code",[t._v("npm start")]),t._v(" 即可（必要情况下，可以删除临时 "),e("code",[t._v("build")]),t._v(" 这个临时目录再试一次）。")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(605),alt:""}})]),t._v(" "),e("p",[t._v("同理，如果要切换该桩数据，只需要点击对应的 "),e("code",[t._v("激活")]),t._v(" 按钮即可")]),t._v(" "),e("p",[e("img",{attrs:{src:a(606),alt:""}})])])}),[],!1,null,null,null);s.default=n.exports}}]);