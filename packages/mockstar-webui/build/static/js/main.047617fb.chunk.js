(this["webpackJsonpmockstar-webui"]=this["webpackJsonpmockstar-webui"]||[]).push([[0],{162:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.request=t.listen=t.AsyncClient=void 0;var a=n(293);Object.defineProperty(t,"AsyncClient",{enumerable:!0,get:function(){return a.AsyncClient}});var r=n(188);Object.defineProperty(t,"listen",{enumerable:!0,get:function(){return r.listen}}),Object.defineProperty(t,"request",{enumerable:!0,get:function(){return r.request}})},188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listen=t.request=void 0;var a="NO_ASYNC_CLIENT",r="NOT_CONNECTED",c="NO_ROUTE",o="DISABLED";function i(e,t){return new Promise((function(n,o){if(!e)return o(a);if(!t)return o(c);var i,l=0;!function t(){e.isConnected()?(i&&clearTimeout(i),n()):l>9?(i&&clearTimeout(i),alert("mockstar async \u670d\u52a1\u672a\u542f\u52a8\uff01\u8bf7\u68c0\u67e5 ".concat(e.getURI()," \u662f\u5426\u5df2\u542f\u52a8")),o(r)):(l++,i=setTimeout((function(){t()}),10))}()}))}t.request=function(e,t,n){return new Promise((function(a,r){i(e,t).then((function(){e.emit(t,n,(function(e){if(e&&e._disable)return r(o);a(e)}))})).catch((function(e){r(e)}))}))},t.listen=function(e,t,n){i(e,t).then((function(){e.on(t,n)})).catch((function(e){throw e}))}},228:function(e,t,n){e.exports=n(439)},242:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){"use strict";var a=n(174),r=n(175),c=n(294),o=n(296);Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncClient=void 0;var i=n(302),l=n(188),s=function(e){c(n,e);var t=o(n);function n(e){var r,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,n),(r=t.call(this,e)).opts=c,r}return r(n,[{key:"listen",value:function(e,t){l.listen(this,e,t)}},{key:"request",value:function(e,t){return l.request(this,e,t)}}]),n}(i.SocketClient);t.AsyncClient=s},302:function(e,t,n){"use strict";var a=n(174),r=n(175),c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SocketClient=void 0;var o=c(n(303)),i=function(){function e(t){a(this,e),this.url=t||"http://local.mockstarjs.org",this.socket=o.default(this.url),this.seq=0,this.init()}return r(e,[{key:"init",value:function(){var e=this;this.socket.on("connect",(function(){console.log("connect "+e.socket.id+" for "+e.url)})),this.socket.on("disconnect",(function(){console.log("disconnect "+e.socket.id)}))}},{key:"isConnected",value:function(){return this.socket.connected}},{key:"getURI",value:function(){return this.socket.io&&this.socket.io.uri||""}},{key:"on",value:function(e,t){this.socket.on(e,(function(n){console.log("[SocketClient on data]",e,n),"function"===typeof t&&t(n)}))}},{key:"emit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if("function"===typeof n){var a="[".concat(Date.now(),"][").concat(this.seq,"]").concat(e);this.seq++,this.socket.emit(e,t,{eventName:a}),this.socket.once(a,(function(t){console.log("[SocketClient once data after emit]",a,e,t),n(t)}))}else this.socket.emit(e,t)}}]),e}();t.SocketClient=i},331:function(e,t){},334:function(e,t,n){},337:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},426:function(e,t,n){},427:function(e,t,n){},428:function(e,t,n){},429:function(e,t,n){},435:function(e,t,n){},436:function(e,t,n){},437:function(e,t,n){},438:function(e,t,n){},439:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),o=n.n(c),i=n(50),l=n(83),s=n(199),u=n(46),m=n(222),d=n(104),f=n.n(d),h="storeStatus",p=function(e){return function(e){return function(t){var n=t["Call API"];if("undefined"===typeof n)return e(t);var a=n.type,r=Object(m.a)(n.types,3),c=r[0],o=r[1],i=r[2];function l(e){e=Object.assign(t,e);var n=Object(u.a)({},h,"fetching");switch(e.type){case o:n[h]="success";break;case i:n[h]="fail"}"fetching"!==n[h]?e.data=Object.assign(e.data||{},n):e.data={};var a=e;return delete a["Call API"],a}n.type=a||"GET";var s=Object.assign({},n.data);e(l({type:c,data:s}));var d=n.url;return f()(n.type,d).send(n.data).then((function(e){return e.body||{}})).then((function(t){var a=l({type:o,data:t});return e(a),"function"===typeof n._onSuccess&&n._onSuccess(t,e),a})).catch((function(t){if(!t||!t.stack||t.errno){var a=l({type:i,error:t});return e(a),"function"===typeof n._onFail&&n._onFail(t,e),Promise.reject(a)}setTimeout((function(){throw t}),0)}))}}},E=n(55),v=n.n(E);function g(){var e=v.a.merge({namespace:"",adminSiteRouteName:"mockstar-admin",adminCGIRouteName:"mockstar-cgi"},window._mockstar_config_);return window._mockstar_config_=e,e}function k(){var e=g().namespace;return e?"/".concat(e,"/"):"/"}function b(){var e=g().adminSiteRouteName;return k()+e}function y(){var e=g().adminCGIRouteName;return k()+e}function S(e){return function(t,n){return t(function(e){return Object(u.a)({},"Call API",{types:["MOCKER_REQUEST","MOCKER_REQUEST_SUCCESS","MOCKER_REQUEST_FAIL"],url:"".concat(y(),"/mocker/").concat(e)})}(e))}}function C(e){return function(t,n){return t(function(e){return Object(u.a)({},"Call API",{types:["MOCKER_README_REQUEST","MOCKER_README_REQUEST_SUCCESS","MOCKER_README_REQUEST_FAIL"],url:"".concat(y(),"/mocker/").concat(e,"/readme")})}(e))}}function O(e,t){return Object(u.a)({},"Call API",{types:["SET_ACTIVE_MODULE_REQUEST","SET_ACTIVE_MODULE_REQUEST_SUCCESS","SET_ACTIVE_MODULE_REQUEST_FAIL"],url:"".concat(y(),"/mocker/").concat(e),type:"POST",data:t})}function M(e,t){return function(n,a){return n(O(e,{config:{activeModule:t}}))}}function j(e,t){return function(n,a){return n(O(e,{config:{disable:t}}))}}var _={isLoaded:!1,data:{},readme:""};var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data,r={};switch(n){case"MOCKER_REQUEST":r={isLoaded:!1};break;case"MOCKER_REQUEST_SUCCESS":r={isLoaded:!0,data:v.a.merge({},a,{modules:(a.modules||[]).sort((function(e,t){return t.priority-e.priority}))})};break;case"MOCKER_REQUEST_FAIL":r={isLoaded:!0};break;case"MOCKER_README_REQUEST_SUCCESS":r={readme:a.html};break;case"SET_ACTIVE_MODULE_REQUEST_SUCCESS":r.data=v.a.merge({},e.data,a)}return Object.keys(r).length?Object.assign({},e,r):e};function T(){return function(e,t){return e(Object(u.a)({},"Call API",{types:["MOCKER_LIST_REQUEST","MOCKER_LIST_REQUEST_SUCCESS","MOCKER_LIST_REQUEST_FAIL"],url:"".concat(y(),"/mocker")}))}}var w={isLoaded:!1,list:[]};var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data,r={};switch(n){case"MOCKER_LIST_REQUEST_SUCCESS":r={isLoaded:!0,list:(a||[]).sort((function(e,t){return t.priority-e.priority}))};break;case"MOCKER_LIST_REQUEST_FAIL":r={isLoaded:!0};break;case"SET_ACTIVE_MODULE_REQUEST_SUCCESS":r.list=e.list.map((function(e){return e.name===a.name&&(e=v.a.merge({},e,a)),e}))}return Object.keys(r).length?Object.assign({},e,r):e};function L(){return function(e,t){return e(Object(u.a)({},"Call API",{types:["DETAIL_REQUEST","DETAIL_REQUEST_SUCCESS","DETAIL_REQUEST_FAIL"],url:"".concat(y(),"/detail")}))}}var A={isLoaded:!1,config:{}};var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data,r={};switch(n){case"DETAIL_REQUEST":r={isLoaded:!1};break;case"DETAIL_REQUEST_SUCCESS":r=v.a.merge({isLoaded:!0},e,a);break;case"DETAIL_REQUEST_FAIL":r={isLoaded:!0}}return Object.keys(r).length?Object.assign({},e,r):e},D=Object(l.c)({mockerInfo:I,mockerListInfo:R,detailInfo:N}),P=function(e){return Object(l.d)(D,e,Object(l.a)(s.a,p))},U=n(32),F=n(33),x=n(35),Q=n(34),q=n(450),K=n(455),H=n(451),J=n(202),V=n(441),G=n(67),B=n(452),z=(n(242),function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(e,a){var r;return Object(U.a)(this,n),(r=t.call(this,e,a)).handleIsActive=function(e){var t;if(e){var n=(t={},Object(u.a)(t,k(),"home"),Object(u.a)(t,"".concat(b(),"/dashboard"),"home"),Object(u.a)(t,"".concat(b(),"/mockers"),"mockers"),Object(u.a)(t,"".concat(b(),"/debug"),"debug"),t)[e.url];n&&n!==r.state.activeMenu&&setTimeout((function(){r.setState({activeMenu:n,isInit:!0})}),0)}},r.state={activeMenu:"",isInit:!1},r}return Object(F.a)(n,[{key:"render",value:function(){var e=this.state.activeMenu;return window.self!==window.top?null:r.a.createElement(V.a.Header,{className:"layout-header header"},r.a.createElement(G.a,{theme:"dark",mode:"horizontal",selectedKeys:[e],style:{lineHeight:"64px"}},r.a.createElement(G.a.Item,{key:"home"},r.a.createElement(B.a,{to:"".concat(b(),"/dashboard"),isActive:this.handleIsActive},"\u9996\u9875")),r.a.createElement(G.a.Item,{key:"mockers"},r.a.createElement(B.a,{to:"".concat(b(),"/mockers"),isActive:this.handleIsActive},"\u6570\u636e\u6a21\u62df"))))}}]),n}(a.Component)),W=(n(265),function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){var e=this.props.localServerConfig,t=window.location.hostname,n="localhost"===t||"127.0.0.1"===t?e.port:window.location.port,a=t+(n?":".concat(n):"")+k().slice(0,-1);return r.a.createElement("div",{className:"proxy-info"},r.a.createElement("h2",null,"\u4ee3\u7406\u8bbe\u7f6e"),r.a.createElement("blockquote",null,"\u5f3a\u70c8\u63a8\u8350\u4f7f\u7528"," ",r.a.createElement("a",{href:"https://avwo.github.io/whistle/",target:"_blank",rel:"noopener noreferrer"},"whistle")," ","\u6765\u505a\u4ee3\u7406\u670d\u52a1\u5668\u3002"),r.a.createElement("p",null,"\u5047\u8bbe\u771f\u5b9e\u7684CGI\u8bf7\u6c42\u4e3a ",r.a.createElement("code",null,"http://youdomain.com/cgi-bin/a/b/demo_01"),"\uff0c\u5219\u8bf7\u8bbe\u7f6e\u4ee3\u7406\u5982\u4e0b\uff1a"),r.a.createElement("pre",null,r.a.createElement("code",null,r.a.createElement("p",null,"youdomain.com ",a),r.a.createElement("p",null," "),r.a.createElement("p",null,"# \u6216\u8005"),r.a.createElement("p",null,"youdomain.com/cgi-bin/a/b/demo_01 ",a),r.a.createElement("p",null," "),r.a.createElement("p",null,"# \u6216\u8005"),r.a.createElement("p",null,"youdomain.com/cgi-bin ",a))),k().length>1?r.a.createElement("div",null,"\u6ce8\u610f\uff0c\u7531\u4e8e\u60a8\u542f\u7528\u4e86 ",r.a.createElement("code",null,"namespace")," \u53c2\u6570\uff0c\u56e0\u6b64\uff0c\u9700\u8981\u5728 nginx \u7684\u914d\u7f6e\u4e2d\u589e\u52a0\u5982\u4e0b\u914d\u7f6e\uff0c\u5426\u5219\u4ee3\u7406\u5c06\u65e0\u6cd5\u751f\u6548\uff01",r.a.createElement("pre",null,r.a.createElement("code",null,r.a.createElement("p",null,"location ^~ ",k()," ","{"),r.a.createElement("p",null," rewrite ",k(),"(.*) /$1 break;"),r.a.createElement("p",null," proxy_pass http://127.0.0.1:",g().port,"/;"),r.a.createElement("p",null,"}")))):null)}}]),n}(a.Component));var Y=Object(i.b)((function(e){return{localServerConfig:e.detailInfo.config}}))(W),$=(n(266),function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-home text-content"},r.a.createElement("h2",null,"HOME"),r.a.createElement("p",null,"\u6b22\u8fce\u4f7f\u7528"," ",r.a.createElement("a",{href:"https://github.com/mockstarjs/mockstar",target:"_blank",rel:"noopener noreferrer"},"mockstar"),"\uff0c\u6b22\u8fce\u7ed9\u6211\u4eec\u63d0"," ",r.a.createElement("a",{href:"https://github.com/mockstarjs/mockstar/issues",target:"_blank",rel:"noopener noreferrer"},"Issues"),"\uff01"),r.a.createElement(Y,null))}}]),n}(a.Component)),X=n(140),Z=n(98),ee=n(60),te=n(445),ne=n(48),ae=n(449);n(267);function re(e){var t=e.mockerItem,n=e.mockersPath,a=e.curTag,c=e.index,o=e.clickTag,i=e.setActive,l=e.setDisable,s=t.config,u=s.disable;return r.a.createElement(te.a,{className:"mocker-list-item",title:"".concat(c+1,". ").concat(t.name),extra:r.a.createElement("div",{className:"card-action"},r.a.createElement(ne.a,{type:u?"primary":"default",icon:"setting",className:"set-disable-btn",onClick:l.bind(this,t.name,u)},u?"\u542f\u7528":"\u7981\u7528"),r.a.createElement(B.a,{to:"".concat(n,"/").concat(t.name)},"\u66f4\u591a..."))},r.a.createElement("div",{className:s.plugin+" "+s.method}),r.a.createElement("div",{className:"detail"},r.a.createElement(ae.a,{message:s.description,type:"info",showIcon:!0})),r.a.createElement("p",null,"\u70b9\u51fb\u6807\u7b7e\u8fdb\u884c\u8fc7\u6ee4\uff1a"),r.a.createElement(X.a.Group,{value:a,onChange:function(e){o(e.target.value)}},s.tags.map((function(e,t){return r.a.createElement(X.a.Button,{value:e,key:t},e)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"\u8bf7\u9009\u62e9\u9700\u8981\u6fc0\u6d3b\u7684\u6a21\u5757\uff1a"),r.a.createElement(X.a.Group,{value:s.activeModule,disabled:u?"disable":"",onChange:function(e){i(t.name,e.target.value)}},t.mockModuleList.map((function(e,t){return r.a.createElement(X.a.Button,{value:e.name,key:t},e.name)}))))}n(292);var ce=function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(e,a){var r;return Object(U.a)(this,n),(r=t.call(this,e,a)).handleClickTag=function(e){r.setState({curTag:e})},r.handleSelectTagChange=function(e){r.setState({curTag:e.target.value})},r.handleActive=function(e,t){r.props.setMockerActiveModule(e,t)},r.handleDisable=function(e,t){r.props.setMockerDisable(e,!t)},r.state={curTag:"\u5168\u90e8"},r}return Object(F.a)(n,[{key:"componentDidMount",value:function(){this.props.loadMockerList()}},{key:"getAllTags",value:function(){var e=this.props.list,t=[];return e.forEach((function(e){t=t.concat(e.config.tags)})),v.a.uniq(t)}},{key:"getFilterList",value:function(){var e=this.state.curTag;return this.props.list.filter((function(t){return t.config.tags.indexOf(e)>-1}))}},{key:"getResultToRenderList",value:function(e){for(var t=e.length,n=t%3!==0?parseInt(t/3,10)+1:parseInt(t/3,10),a=[],r=0;r<n;r++){for(var c=[],o=3*r;o<3*(r+1)&&o<t;o++)c.push(e[o]);a.push(c)}return a}},{key:"render",value:function(){var e=this,t=this.props.match,n=this.state.curTag,a=this.getAllTags(),c=this.getFilterList(),o=this.getResultToRenderList(c);return r.a.createElement("div",{className:"mockers"},r.a.createElement("div",{className:"tag-wrapper"},r.a.createElement(X.a.Group,{value:n,onChange:this.handleSelectTagChange},a.map((function(e,t){return r.a.createElement(X.a.Button,{value:e,key:t},e)})))),r.a.createElement("div",{className:"list-wrapper"},o.map((function(a,c){return r.a.createElement(Z.a,{gutter:16,key:c},a.map((function(a,o){return r.a.createElement(ee.a,{span:8,key:o},r.a.createElement(re,{index:3*c+o,curTag:n,mockerItem:a,mockersPath:t.url,clickTag:e.handleClickTag,setActive:e.handleActive,setDisable:e.handleDisable}))})))}))))}}]),n}(a.Component);var oe=Object(i.b)((function(e){var t=e.mockerListInfo;return{isLoaded:t.isLoaded,list:t.list}}),(function(e){return{loadMockerList:function(){return e(T())},setMockerActiveModule:function(t,n){return e(M(t,n))},setMockerDisable:function(t,n){return e(j(t,n))}}}))(ce),ie=n(162);function le(e,t){return new Promise((function(n,a){f.a.post(e).set("Content-Type","application/json").send(t).end((function(e,t){if(e)return a(e);n(t.body)}))}))}function se(e,t){return new Promise((function(n,a){f.a.get(e).query(t).end((function(e,t){if(e)return a(e);n(t.body)}))}))}var ue=n(448);n(334);function me(e){var t=e.name,n=e.match.url.split("/");n.pop();var a=n.join("/");return r.a.createElement("div",{className:"mocker-breadcrumb"},r.a.createElement(ue.a,null,r.a.createElement(ue.a.Item,null,r.a.createElement(B.a,{to:a}," \u5217\u8868 ")),r.a.createElement(ue.a.Item,null,t)))}n(337);function de(e){var t=e.mockerItem;return(t.mockModuleList||[]).filter((function(e){return e.name===t.config.activeModule}))[0]?r.a.createElement(te.a,{className:"mocker-detail"},r.a.createElement("div",{className:t.config.plugin+" "+t.config.method}),r.a.createElement(Z.a,null,r.a.createElement(ee.a,{span:12},r.a.createElement("h2",null,t.name),r.a.createElement("p",null,t.config.description),r.a.createElement("p",null,t.config.version?"v".concat(t.config.version):"",t.config.author?" by ".concat(t.config.author):"")),r.a.createElement(ee.a,{span:12},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"\u6570\u636e\u7c7b\u578b:"),r.a.createElement("td",null,t.config.plugin)),r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"100px"}},"\u914d\u7f6e\u7684\u8def\u7531:"),r.a.createElement("td",null,t.config.route)),r.a.createElement("tr",null,r.a.createElement("td",null,"\u5df2\u6fc0\u6d3b\u6570\u636e:"),r.a.createElement("td",null,t.config.activeModule))))))):null}var fe=n(446),he=(n(338),function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(e,a){var r;return Object(U.a)(this,n),(r=t.call(this,e,a)).handleOnChange=function(e){r.setState({showData:e.target.value})},r.state={showData:""},r}return Object(F.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.props.data!==e.data&&this.setState({showData:JSON.stringify(e.data,null,2)})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.mockerItem,a=e.onHide,c=e.onEmitPush,o=this.state.showData,i=!!t,l="async"===n.config.plugin;return r.a.createElement("div",{className:"mocker-show-result"},r.a.createElement(fe.a,{title:"\u7ed3\u679c",visible:i,onCancel:a,onOk:a,footer:[l?r.a.createElement(ne.a,{key:"push",type:"primary",size:"large",onClick:c.bind(this,o)},"\u4e3b\u52a8\u63a8\u9001"):null,r.a.createElement(ne.a,{key:"cancel",type:"primary",size:"large",onClick:a},"\u77e5\u9053\u4e86")]},r.a.createElement("textarea",{name:"cgidata",id:"cgidata",style:{width:"100%",minHeight:"600px"},value:o,onChange:this.handleOnChange})))}}]),n}(a.Component));n(339);function pe(e){var t=e.isDisabled,n=e.activeModule,a=e.previewResult,c=e.updateDisable;return r.a.createElement("div",{className:"mocker-action"},t?r.a.createElement(ae.a,{message:"\u5f53\u524d mock \u670d\u52a1\u5df2\u88ab\u7981\u7528\uff0c\u60a8\u53ef\u8bf7\u70b9\u51fb\u201c\u542f\u7528\u201d\u6309\u94ae\u5f00\u59cb mock \u670d\u52a1\uff01",type:"warning",showIcon:!0}):r.a.createElement(ae.a,{message:"mock \u670d\u52a1\u5df2\u5f00\u59cb\u751f\u6548\uff01",type:"success",showIcon:!0}),r.a.createElement(ne.a,{type:"primary",disabled:t?"disable":"",icon:"profile",onClick:a},"\u9884\u89c8\u7ed3\u679c \u3010 ",n," \u3011"),r.a.createElement(ne.a,{type:t?"primary":"default",icon:"setting",onClick:c},t?"\u542f\u7528":"\u7981\u7528"," mock \u670d\u52a1"))}n(340);function Ee(e){var t=e.isDisabled,n=e.mockerItem,a=e.mockServerHost;return"xhr"!==n.config.plugin||t?null:r.a.createElement(te.a,{className:"mocker-proxy-info"},r.a.createElement("p",null,"whistle \u4ee3\u7406\u8bbe\u7f6e\uff1a"," ",r.a.createElement("code",null,"/(.*)",n.config.route,"(.*)/ ",a)))}var ve=n(443);n(341);function ge(e){var t=this,n=e.isLoaded,a=e.mockerItem,c=e.previewResult,o=e.updateActive,i=a.config.activeModule||"",l=a.mockModuleList||[],s=[{title:"\u6570\u636e\u6a21\u578b\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u63cf\u8ff0",dataIndex:"description",key:"description",render:function(e,t){return r.a.createElement("div",null,t.config.version?"V"+t.config.version:"",t.config.author?" by"+t.config.author:"",t.config.description)}},{title:"\u64cd\u4f5c",key:"action",render:function(e,n){return r.a.createElement("div",null,r.a.createElement(ne.a,{type:"primary",disabled:a.config.disable?"disable":"",onClick:c.bind(t,n.config.match)},"\u9884\u89c8\u7ed3\u679c"),r.a.createElement("span",{className:"ant-divider"}),n.name!==i?r.a.createElement(ne.a,{type:"primary",disabled:a.config.disable?"disable":"",onClick:o.bind(t,n.name)},"\u6fc0\u6d3b"):r.a.createElement(ne.a,{type:"primary",disabled:"disable"},"\u5df2\u6fc0\u6d3b"))}}];return r.a.createElement("div",{className:"mock-module-list"},r.a.createElement(ve.a,{loading:!n,rowKey:"name",columns:s,dataSource:l}))}n(426);function ke(e){var t=e.htmlContent;return t?r.a.createElement("div",{className:"mocker-readme"},r.a.createElement(te.a,{title:"\u4f7f\u7528\u8bf4\u660e"},r.a.createElement("div",{className:"readme-content text-content",dangerouslySetInnerHTML:{__html:t}}))):null}var be=n(453),ye=(n(427),function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){t.item;var n=t.key;e.props.match.params.mockerName!==n&&(e.props.history.push(e.props.match.path.replace(/:mockerName/gi,n)),e.props.refresh(n))},e}return Object(F.a)(n,[{key:"render",value:function(){var e=this.props,t=e.mockerListInfo,n=e.match;if(!t.isLoaded)return null;var a=n.params.mockerName;return r.a.createElement("div",{className:"mocker-menu"},r.a.createElement(G.a,{defaultSelectedKeys:[a],selectedKeys:[a],onClick:this.handleClick},t.list.map((function(e){return r.a.createElement(G.a.Item,{key:e.name,className:e.config.plugin+" "+e.config.method},e.name)}))))}}]),n}(a.Component)),Se=Object(be.a)(ye),Ce=(n(428),function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(e,a){var r;return Object(U.a)(this,n),(r=t.call(this,e,a)).handlePreviewResult=function(e){var t=r.props.mockerItem,n=t.config.route,a=r.getMockServerHost();if("async"!==t.config.plugin){if(a&&n.indexOf(a)<0){var c=g().namespace,o=0===n.indexOf("/")?n:"/"+n,i=(c?"/".concat(c):"")+o;n="http://".concat(a).concat(i)}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data?e.data:void 0;return"post"===e.method?le(e.url,t):se(e.url,t)})({method:t.config.method,url:n,data:e}).then((function(e){r.handleModalShow(e)})).catch((function(e){console.error(e)}))}else{new ie.AsyncClient("http://".concat(a)).request(n,e).then((function(e){r.handleModalShow(e)})).catch((function(e){console.error(e)}))}},r.handleActive=function(e){r.props.setMockerActiveModule(r.props.mockerItem.name,e)},r.handleModalShow=function(e){r.setState({modalShowData:e})},r.handleModalHide=function(){r.setState({modalShowData:null})},r.handleModalEmitPush=function(e){console.log("--push---",e);var t=r.props.mockerItem,n=r.getMockServerHost();new ie.AsyncClient("http://".concat(n)).emit("emitStub",{route:t.config.route,name:t.config.name,activeModule:t.config.activeModule,result:e})},r.handleDisable=function(){r.props.setMockerDisable(r.props.mockerItem.name,!r.props.mockerItem.config.disable)},r.handleRefresh=function(e){r.props.loadMocker(e),r.props.loadMockerReadme(e)},r.state={modalShowData:null},r}return Object(F.a)(n,[{key:"componentDidMount",value:function(){console.log("Mocker componentDidMount",this.props);var e=this.props.match.params.mockerName;this.props.loadMocker(e),this.props.loadMockerReadme(e),this.props.loadMockerList()}},{key:"getMockServerHost",value:function(){var e=this.props.localServerConfig,t=window.location.hostname,n="localhost"===t||"127.0.0.1"===t?e.port:window.location.port;return t+(n?":".concat(n):"")}},{key:"render",value:function(){var e=this.props,t=e.isLoaded,n=e.mockerItem,a=e.readme,c=e.match,o=e.mockerListInfo,i=this.state.modalShowData,l=this.getMockServerHost();return r.a.createElement(V.a,{className:"mockers-mocker"},r.a.createElement(V.a.Sider,{className:"mocker-sider",width:"300"},r.a.createElement(Se,{mockerListInfo:o,match:c,refresh:this.handleRefresh})),r.a.createElement(V.a,{className:"mocker-content"},r.a.createElement(me,{name:n.name,match:c}),t?r.a.createElement("div",null,r.a.createElement(pe,{isDisabled:n.config.disable,activeModule:n.config.activeModule,previewResult:this.handlePreviewResult.bind(this,null),updateDisable:this.handleDisable}),r.a.createElement(Ee,{isDisabled:n.config.disable,mockerItem:n,mockServerHost:l}),r.a.createElement(de,{mockerItem:n}),r.a.createElement(ge,{isLoaded:t,mockerItem:n,previewResult:this.handlePreviewResult,updateActive:this.handleActive}),r.a.createElement(he,{data:i,mockerItem:n,onHide:this.handleModalHide,onEmitPush:this.handleModalEmitPush}),r.a.createElement(ke,{htmlContent:a})):r.a.createElement("div",null,"\u52a0\u8f7d\u4e2d...")))}}]),n}(a.Component));var Oe=Object(i.b)((function(e){var t=e.mockerInfo,n=e.mockerListInfo,a=e.detailInfo;return{isLoaded:t.isLoaded,mockerItem:t.data,readme:t.readme,mockerListInfo:n,localServerConfig:a.config,hostname:a.hostname}}),(function(e){return{loadMockerList:function(){return e(T())},loadMocker:function(t){return e(S(t))},loadMockerReadme:function(t){return e(C(t))},setMockerActiveModule:function(t,n){return e(M(t,n))},setMockerDisable:function(t,n){return e(j(t,n))}}}))(Ce);n(429);function Me(e){var t=e.match;return r.a.createElement("div",{className:"page-mockers"},r.a.createElement(J.a,{path:"".concat(t.url,"/:mockerName"),component:Oe}),r.a.createElement(J.a,{exact:!0,path:t.url,component:oe}))}var je=n(141),_e=n(454),Ie=n(442),Te=n(444),we=n(447),Re={labelCol:{span:8},wrapperCol:{span:16}},Le={wrapperCol:{offset:8,span:16}},Ae={retcode:0,result:{description:"\u6211\u662f debug"}},Ne=function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).formRef=r.a.createRef(),e.onFinish=function(t){console.log("Success:",t),e.props.handleCreateMocker(t)},e.onFinishFailed=function(e){console.log("Failed:",e)},e}return Object(F.a)(n,[{key:"componentWillReceiveProps",value:function(e,t){this.props.localServerConfig.mockServerPath!==e.localServerConfig.mockServerPath&&this.formRef.current.setFieldsValue({parentPath:e.localServerConfig.mockServerPath})}},{key:"render",value:function(){var e=this.props.localServerConfig,t={parentPath:e.mockServerPath,mockerName:"i-am-xhr-request-get",mockerMethod:"GET",mockerRoute:"/cgi-bin/i-am-xhr-request-get",debugMockModuleJsonData:JSON.stringify(Ae,null,2)};return r.a.createElement(Te.a,Object.assign({},Re,{name:"basic",ref:this.formRef,initialValues:t,onFinish:this.onFinish,onFinishFailed:this.onFinishFailed}),r.a.createElement(Te.a.Item,{label:"\u7236\u7ea7\u76ee\u5f55",name:"parentPath",rules:[{required:!0,message:"Please input your parentPath!"}]},r.a.createElement(we.a,{value:e.mockServerPath})),r.a.createElement(Te.a.Item,{label:"mocker name",name:"mockerName",rules:[{required:!0,message:"Please input your mockerName!"}]},r.a.createElement(we.a,null)),r.a.createElement(Te.a.Item,{label:"mocker method",name:"mockerMethod",rules:[{required:!0,message:"Please input your mockerMethod!"}]},r.a.createElement(we.a,null)),r.a.createElement(Te.a.Item,{label:"mocker route",name:"mockerRoute",rules:[{required:!0,message:"Please input your mockerRoute!"}]},r.a.createElement(we.a,null)),r.a.createElement(Te.a.Item,{label:"\u6869\u6570\u636e",name:"debugMockModuleJsonData"},r.a.createElement(we.a.TextArea,{autoSize:!0})),r.a.createElement(Te.a.Item,Le,r.a.createElement(ne.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4")))}}]),n}(a.Component),De=(n(435),function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={logs:[],message:"",messageType:"info"},e.handleCreateMocker=function(t){var n="".concat(y(),"/create-mocker");e.addLog("\u51c6\u5907\u53d1\u9001\u8bf7\u6c42\uff1a".concat(JSON.stringify(t))),le(n,t).then((function(t){0===t.retcode?e.addLog(t,"success"):e.addLog(t.result,"error")})).catch((function(t){console.error(t),e.addLog(t&&t.message||t,"error")}))},e.addLog=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";e.setState({logs:[].concat(Object(je.a)(e.state.logs),[{message:"object"===typeof t?JSON.stringify(t):t,messageType:n}])})},e}return Object(F.a)(n,[{key:"getMockServerHost",value:function(){var e=this.props.localServerConfig,t=window.location.hostname,n="localhost"===t||"127.0.0.1"===t?e.port:window.location.port;return t+(n?":".concat(n):"")}},{key:"render",value:function(){var e=this.props.localServerConfig,t=this.state.logs;return r.a.createElement("div",{className:"create-mocker"},r.a.createElement("h2",null,"\u521b\u5efa mocker"),r.a.createElement(Ne,{localServerConfig:e,handleCreateMocker:this.handleCreateMocker}),t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(_e.a,null,t),r.a.createElement(ae.a,{message:e.message,type:e.messageType}),r.a.createElement(Ie.a,null))})))}}]),n}(a.Component));var Pe=Object(i.b)((function(e){return{localServerConfig:e.detailInfo.config}}))(De),Ue={labelCol:{span:8},wrapperCol:{span:16}},Fe={wrapperCol:{offset:8,span:16}},xe=function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onFinish=function(t){console.log("Success:",t),e.props.handleSearchMocker(t)},e.onFinishFailed=function(e){console.log("Failed:",e)},e}return Object(F.a)(n,[{key:"render",value:function(){return r.a.createElement(Te.a,Object.assign({},Ue,{name:"basic",initialValues:{route:"/cgi-bin/i-am-xhr-request-get"},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed}),r.a.createElement(Te.a.Item,{label:"route",name:"route",rules:[{required:!0,message:"Please input your route!"}]},r.a.createElement(we.a,null)),r.a.createElement(Te.a.Item,Fe,r.a.createElement(ne.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4")))}}]),n}(a.Component),Qe=(n(436),function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={logs:[],message:"",messageType:"info"},e.handleSearchMocker=function(t){var n="".concat(y(),"/search-mocker-list");e.addLog("\u51c6\u5907\u53d1\u9001\u8bf7\u6c42\uff1a".concat(JSON.stringify(t))),le(n,t).then((function(t){0===t.retcode?e.addLog(t,"success"):e.addLog(t.result,"error")})).catch((function(t){console.error(t),e.addLog(t&&t.message||t,"error")}))},e.addLog=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";e.setState({logs:[].concat(Object(je.a)(e.state.logs),[{message:"object"===typeof t?JSON.stringify(t):t,messageType:n}])})},e}return Object(F.a)(n,[{key:"getMockServerHost",value:function(){var e=this.props.localServerConfig,t=window.location.hostname,n="localhost"===t||"127.0.0.1"===t?e.port:window.location.port;return t+(n?":".concat(n):"")}},{key:"render",value:function(){var e=this.props.localServerConfig,t=this.state.logs;return r.a.createElement("div",{className:"search-mocker"},r.a.createElement("h2",null,"\u641c\u7d22 mocker"),r.a.createElement(xe,{localServerConfig:e,handleSearchMocker:this.handleSearchMocker}),t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(_e.a,null,t),r.a.createElement(ae.a,{message:e.message,type:e.messageType}),r.a.createElement(Ie.a,null))})))}}]),n}(a.Component));var qe=Object(i.b)((function(e){return{localServerConfig:e.detailInfo.config}}))(Qe),Ke=(n(437),function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-debug text-content"},r.a.createElement(Pe,null),r.a.createElement(qe,null))}}]),n}(a.Component)),He=(n(438),function(e){Object(x.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(L())}},{key:"render",value:function(){return r.a.createElement(q.a,null,r.a.createElement(V.a,{className:"mockstar-container"},r.a.createElement(z,null),r.a.createElement(V.a.Content,null,r.a.createElement(K.a,null,r.a.createElement(H.a,{exact:!0,from:"/",to:"".concat(b(),"/mockers")}),r.a.createElement(H.a,{exact:!0,from:"".concat(b()),to:"".concat(b(),"/mockers")}),r.a.createElement(J.a,{path:"".concat(b(),"/dashboard"),component:$}),r.a.createElement(J.a,{path:"".concat(b(),"/mockers"),component:Me}),r.a.createElement(J.a,{path:"".concat(b(),"/debug"),component:Ke})))))}}]),n}(a.Component)),Je=P(window.__initialState);var Ve=Object(i.b)((function(e){return e}),(function(e){return{dispatch:e}}))(He);o.a.render(r.a.createElement(i.a,{store:Je},r.a.createElement(Ve,null)),document.getElementById("root"))}},[[228,1,2]]]);
//# sourceMappingURL=main.047617fb.chunk.js.map